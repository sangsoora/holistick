<%= simple_form_for [@conversation, @message], remote: true  do |f| %>
  <div class="message-form-control form-group">
    <%= f.input :content, placeholder: "Say something...", required: true, autofocus: true, label: false, :input_html => {:rows => 1, class: 'form-control', onkeyup: "success()"} %>
    <input type="submit" id="sendBtn" name="commit" value="Send" class="btn btn-flat" style="border-radius: 0;" disabled>
  </div>
<% end %>
<script>
  function success() {
    if(document.getElementById("message_content").value==="") {
      document.getElementById('sendBtn').disabled = true;
    } else {
      document.getElementById('sendBtn').disabled = false;
    }
  }
  function submitOnEnter(event){
    if (event.which === 13 && !event.shiftKey) {
      event.preventDefault();
      document.getElementById("sendBtn").click();
    }
  }
  document.getElementById("message_content").addEventListener("keypress", submitOnEnter);
</script>
